#### RDB持久化

在指定的时间间隔内将内存中的数据集快照写入磁盘，也就是snapshot快照，它恢复时再将快照文件读到内存里。

Redis会单独创建（fork）一个子进程来进行持久化，会先将数据写入到一个临时文件，待持久化结束，再用这个临时文件替换上次持久化好的文件。

整个过程，主进程时不进行任何IO操作的，这就保证了主进程一直保持极高的性能。

如果需要大规模蛾数据恢复，且对于数据恢复的完整性不是特别敏感，那RDB方式比AOF方式更加高效。

RDB的缺点就是最后一次持久化后的数据可能丢失。默认是RDB方式，不需要修改这个配置。

RDB保存的文件时dump.rdb，二进制文件，小
```
save 900 1            #100秒内至少修改一次就触发RDB持久化操作
dbfilename dump.rdb   
```

- save规则满足
- flushall命令
- 退出，exit
这三个条件都会触发RDB持久化，生成dump.rdb文件

恢复数据：只要将rdb文件放入redis启动目录，启动的时候会自动恢复
```
congfig get dir  #获取redis启动目录
```

优点：

1. 适合大规模数据恢复
2.对数据完整性要求不高，最后一次持久化之前的数据可能会丢失

缺点：

1.持久化需要一定时间间隔操作，意外发生，最后一次持久化之后的数据可能丢失
2.开启子进程，占用内存

save "" 关闭rdb
